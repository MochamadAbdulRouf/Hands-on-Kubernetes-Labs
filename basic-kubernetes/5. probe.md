# Probe di Kubernetes
Probe adalah sebuah mekanisme diagnostik yang dilakukan secara periodik oleh kubelet terhadap sebuah container untuk memastikan container tersebut berada dalam kondisi sehat.Hasil dari probe ini akan menentukan tindakan apa yang di ambil kubernetes.

## Ada tiga jenis probe di kubernetes:

1. Liveness Probe 
Tujuan mendeteksi kapan sebuah aplikasi macet (deadlock) atau berhenti merespon, Meskipun prosesnya secara teknis berjalan. Ini adalah masalah yang tidak bisa dideteksi hanya dengan melihat prosesnya ada atau tidak.
Jika Liveness probe gagal beberapa kali kubelet akan menganggap container tersebut mati dan akan membunuhnya lalu merestartntya sesuai dengan restartPolicy Pod.Ini adalah mekanisme "turn it off and on again" otomatis.

2. Readiness Probe
Tujuan untuk mengetahui kapan sebuah aplikasi siap melayani pengguna.Banyak aplikasi butuh waktu untuk startup: Memuat konfigurasi, Memanaskan cache, Menyambungkan ke database.Mengirim traffic ke aplikasi yang belum siap akan menyebabkan error.

3. Startup Probe
Tujuan khusus untuk aplikasi yang memiliki waktu startup sangat lama (misalnya beberapa menit). Tanpa startup probe, Liveness Probe bisa gagal berkali kali selama proses startup yang panjang dan menyebabkan container di restart sebelum sempat siap.Startup probe akan menonaktifkan Liveness dan Readiness Probe sampai ia berhasil, Seteolah probe berhasil satu kali, Kubelet akan menyerahkan tugas pemeriksaan kesehatan kepada Liveness dan Readiness Probe. Jika Startup Probe gagal, Container akan di restart

## Cara kerja :

Kubernetes bisa melakukan pemeriksaan dengan tiga cara :
1. HTTP GET Kubelet mengirimkan permintaan ke path tertentu misal (/healthz) jika respon 2xx atau 3xx maka probe di anggap berhasil
2. TCP Socket Kubelet mencoba membuka koneksi TCP ke port tertentu di container, Jika koneksi berhasil dibuat probe dianggap berhasil. Ini berguna untuk layanan non-HTTP seperti database
3. Exec Command Kubelet menjalankan sebuah perintah didalam container.Jika perintah tersebut selesai dengan exit code 0, Probe dianggap berhasil